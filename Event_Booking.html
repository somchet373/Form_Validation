<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ฟอร์มจองตั๋วกิจกรรม</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center px-4">
  <div class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-md">
    <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">จองตั๋วกิจกรรม</h2>
    
    <form id="bookingForm" class="space-y-4">
      <div>
        <label class="block mb-1 font-medium text-gray-700">ชื่อ-นามสกุล:</label>
        <input id="fullname" type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <p id="nameError" class="text-red-500 text-sm mt-1"></p>
      </div>

      <div>
        <label class="block mb-1 font-medium text-gray-700">เบอร์โทรศัพท์:</label>
        <input id="phone" type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <p id="phoneError" class="text-red-500 text-sm mt-1"></p>
      </div>

      <div>
        <label class="block mb-1 font-medium text-gray-700">ประเภทตั๋ว:</label>
        <select id="ticketType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="ปกติ">ปกติ</option>
          <option value="VIP">VIP</option>
          <option value="Premium">Premium</option>
        </select>
      </div>

      <div>
        <label class="block mb-1 font-medium text-gray-700">จำนวนตั๋ว:</label>
        <input id="ticketAmount" type="number" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="1" max="5" />
        <p id="amountError" class="text-red-500 text-sm mt-1"></p>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">จองตั๋ว</button>
    </form>
  </div>

  <!-- Modal -->
  <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-xl shadow-lg text-center space-y-4">
      <p id="modalMessage" class="text-lg font-semibold text-gray-800"></p>
      <button onclick="closeModal()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">ปิด</button>
    </div>
  </div>

  <script>
    const form = document.getElementById("bookingForm");
    const nameInput = document.getElementById("fullname");
    const phoneInput = document.getElementById("phone");
    const ticketType = document.getElementById("ticketType");
    const ticketAmount = document.getElementById("ticketAmount");

    const nameError = document.getElementById("nameError");
    const phoneError = document.getElementById("phoneError");
    const amountError = document.getElementById("amountError");

    const modal = document.getElementById("successModal");
    const modalMessage = document.getElementById("modalMessage");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      nameError.textContent = "";
      phoneError.textContent = "";
      amountError.textContent = "";

      let valid = true;
      const nameParts = nameInput.value.trim().split(/\s+/);
      if (nameParts.length < 2) {
        nameError.textContent = "กรุณากรอกชื่อและนามสกุล (อย่างน้อย 2 คำ)";
        valid = false;
      }

      const phone = phoneInput.value.trim();
      if (!/^0\d{9}$/.test(phone)) {
        phoneError.textContent = "เบอร์โทรต้องเป็นตัวเลข 10 หลักขึ้นต้นด้วย 0";
        valid = false;
      }

      const amount = parseInt(ticketAmount.value);
      const type = ticketType.value;
      if (amount < 1 || amount > 5) {
        amountError.textContent = "จำนวนตั๋วต้องระหว่าง 1 ถึง 5";
        valid = false;
      } else if ((type === "VIP" || type === "Premium") && amount > 2) {
        amountError.textContent = "VIP หรือ Premium จองได้ไม่เกิน 2 ใบ";
        valid = false;
      }

      if (valid) {
        modalMessage.textContent = `จองตั๋วสำเร็จ จำนวน: ${amount} ประเภท: ${type}`;
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      }
    });

    function closeModal() {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
      form.reset();
    }
  </script>
</body>
</html>
